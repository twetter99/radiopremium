<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="RadioPremium.App.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:RadioPremium.App.Converters"
    Background="{StaticResource BackgroundSecondaryBrush}">

    <Page.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Page.Resources>

    <ScrollViewer Padding="24,40,24,24">
        <StackPanel MaxWidth="800" Spacing="24">
            
            <!-- Header -->
            <TextBlock 
                Text="Ajustes"
                Style="{ThemeResource TitleLargeTextBlockStyle}" />

            <!-- Audio Settings -->
            <StackPanel Spacing="8">
                <TextBlock 
                    Text="Audio"
                    Style="{ThemeResource SubtitleTextBlockStyle}" />
                
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <!-- Volume -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="50" />
                            </Grid.ColumnDefinitions>
                            <TextBlock 
                                Grid.Column="0"
                                Text="Volumen"
                                VerticalAlignment="Center" />
                            <Slider 
                                x:Name="VolumeSlider"
                                Grid.Column="1"
                                Minimum="0"
                                Maximum="1"
                                StepFrequency="0.01"
                                Value="{x:Bind ViewModel.Volume, Mode=TwoWay}" />
                            <TextBlock 
                                Grid.Column="2"
                                Text="{x:Bind VolumeSlider.Value, Mode=OneWay}"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Right" />
                        </Grid>

                        <!-- Capture Duration -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock 
                                Grid.Column="0"
                                Text="Duración captura"
                                VerticalAlignment="Center" />
                            <ComboBox 
                                Grid.Column="1"
                                SelectedItem="{x:Bind ViewModel.CaptureSeconds, Mode=TwoWay}"
                                ItemsSource="{x:Bind ViewModel.CaptureSecondsOptions}" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Stations Settings -->
            <StackPanel Spacing="8">
                <TextBlock 
                    Text="Emisoras"
                    Style="{ThemeResource SubtitleTextBlockStyle}" />
                
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <!-- Music Only Filter -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock 
                                    Text="Solo emisoras musicales"
                                    VerticalAlignment="Center" />
                                <TextBlock 
                                    Text="Filtra emisoras de noticias, deportes, talk shows, etc."
                                    Style="{ThemeResource CaptionTextBlockStyle}"
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            </StackPanel>
                            <ToggleSwitch 
                                Grid.Column="1"
                                IsOn="{x:Bind ViewModel.MusicOnlyFilter, Mode=TwoWay}" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Appearance Settings -->
            <StackPanel Spacing="8">
                <TextBlock 
                    Text="Apariencia"
                    Style="{ThemeResource SubtitleTextBlockStyle}" />
                
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="16">
                        <!-- Theme -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock 
                                Grid.Column="0"
                                Text="Tema"
                                VerticalAlignment="Center" />
                            <ComboBox 
                                Grid.Column="1"
                                SelectedItem="{x:Bind ViewModel.Theme, Mode=TwoWay}"
                                ItemsSource="{x:Bind ViewModel.AvailableThemes}" />
                        </Grid>

                        <!-- Notifications -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock 
                                Grid.Column="0"
                                Text="Mostrar notificaciones"
                                VerticalAlignment="Center" />
                            <ToggleSwitch 
                                Grid.Column="1"
                                IsOn="{x:Bind ViewModel.ShowNotifications, Mode=TwoWay}" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Spotify Integration -->
            <StackPanel Spacing="8">
                <TextBlock 
                    Text="Spotify"
                    Style="{ThemeResource SubtitleTextBlockStyle}" />
                
                <Border Style="{StaticResource CardStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock 
                                Text="{x:Bind ViewModel.IsSpotifyConnected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"
                                Visibility="{x:Bind ViewModel.IsSpotifyConnected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" />
                            <TextBlock 
                                Text="Conectado"
                                Visibility="{x:Bind ViewModel.IsSpotifyConnected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"
                                Style="{ThemeResource BodyStrongTextBlockStyle}" />
                            <TextBlock 
                                Text="No conectado"
                                Visibility="{x:Bind ViewModel.IsSpotifyConnected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert}"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>

                        <Button 
                            Grid.Column="1"
                            Click="SpotifyDisconnect_Click"
                            Visibility="{x:Bind ViewModel.IsSpotifyConnected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE7E8;" FontSize="14" />
                                <TextBlock Text="Desconectar" />
                            </StackPanel>
                        </Button>
                    </Grid>
                </Border>
            </StackPanel>

            <!-- About -->
            <StackPanel Spacing="8">
                <TextBlock 
                    Text="Acerca de"
                    Style="{ThemeResource SubtitleTextBlockStyle}" />
                
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel Spacing="8">
                        <TextBlock 
                            Text="Radio Premium"
                            Style="{ThemeResource BodyStrongTextBlockStyle}" />
                        <TextBlock 
                            Text="Versión 1.0.0"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        <TextBlock 
                            Text="Reproductor de radio online con identificación de canciones"
                            Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                            TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Reset Settings -->
            <Button 
                Click="ResetSettings_Click"
                HorizontalAlignment="Left">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon Glyph="&#xE72C;" FontSize="14" />
                    <TextBlock Text="Restablecer ajustes" />
                </StackPanel>
            </Button>

            <!-- Keyboard Shortcuts -->
            <StackPanel Spacing="8">
                <TextBlock 
                    Text="Atajos de teclado"
                    Style="{ThemeResource SubtitleTextBlockStyle}" />
                
                <Border Style="{StaticResource CardStyle}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Reproducir / Pausar" Margin="0,4" />
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="Espacio" FontFamily="Consolas" Margin="0,4" />

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Identificar canción" Margin="0,4" />
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="Ctrl + I" FontFamily="Consolas" Margin="0,4" />

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Añadir a Spotify" Margin="0,4" />
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="Ctrl + Shift + S" FontFamily="Consolas" Margin="0,4" />

                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Ajustes" Margin="0,4" />
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="Ctrl + ," FontFamily="Consolas" Margin="0,4" />
                    </Grid>
                </Border>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</Page>
